////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ACR Configuration File
//     Filename : acf_area_onexit.nss
//      Version : 0.1
//         Date : 7/25/06
//       Author : Ronan
//
//  Local Variable Prefix =
//
//
//  Dependencies external of nwscript:
//
//  Description
//  This script calls the ACR's OnAreaExit code, and any custom code a server
//  may need. It is not updated in ACR updates.
//
//  Revision History
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_area_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

// The main event handler.
void main();

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main() {
    ACR_AreaOnExit();
 object oPC=GetExitingObject(); 
 object oCount=GetFirstItemInInventory(oPC); 
 int iCheck=GetLocalInt(oCount,"REMOVE_ON_AREA_EXIT"); 
 while (GetIsObjectValid(oCount)) 
 	{ 
 	//sCountTag=GetTag(oCount); 
 	if (iCheck==1) 
 		{
		CopyItem(oCount, GetNearestObject(OBJECT_TYPE_STORE,oPC), TRUE);
 		DestroyObject(oCount); 
 		} 
 	 
 	oCount=GetNextItemInInventory(oPC); 
 	iCheck=GetLocalInt(oCount,"REMOVE_ON_AREA_EXIT"); 
 	} 
    // Custom code goes below this line.
}