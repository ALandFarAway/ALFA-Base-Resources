/******************************************************************************
*****                         	 nwnx_craft                               *****
*****                               V 1.0                                 *****
*****                             04/09/11                                *****
******************************************************************************/


// Name     : NWNX Crafter Initialization Wrapper
// Purpose  : Wrapper script that must be run to initialize xp_craft once at startup
// Author   : Basilica
// Modified : April 04, 2011

// This file is licensed under the terms of the
// GNU GENERAL PUBLIC LICENSE (GPL) Version 2

void main() {
	object oModule = GetModule();

	//
	// Forbid duplicate initialization.
	//

	if (GetLocalInt(oModule, "XC_CRAFT_INITIALIZED"))
	{
		return;
	}

	SetLocalInt(oModule, "XP_CRAFT_INITIALIZED", TRUE);

	WriteTimestampedLogEntry("nwnx_craft_init:  Craft system initializing.");

	//
	// Execute the base xp_craft initialization script.
	//

	ExecuteScript("nwnx_craft_set_constants", OBJECT_SELF);

	//
	// Now set up the blacklists for various variations.
	//
	// These are maintained separately from the active lists in
	// nwnx_craft_set_constants, which is now autogenerated.
	//
	// Blacklists follow the same convention as the active lists, but with the
	// variable name having "_BLACKLIST" appended.  A list of #-delimited
	// variation numbers (string must begin and end with a #) specifies the list
	// of variations to refuse.
	//

  /*--------------------------------------------------------------------------*\
  |                               ModelParts                                   |
  |----------------------------------------------------------------------------|
  | Model parts are related to weapons and shields. Some weapons have up to    |
  | three model parts (i.e., longsword).                                       |
  |                                                                            |
  | 0 is a valid model part, but it represents an invisible part.              |
  |                                                                            |
  | These lists use the ItemClass column of the baseitem.2da 2DA file in order |
  | to respect the official naming conventions of the weapon 3d models.        |
  |                                                                            |
  | If you ever use custom weapons types, you would need to name them in       |
  | relation to that 2da file.                                                 |
  \*--------------------------------------------------------------------------*/

	//
	// For example, disallow variation 1 for XC_W_ARROW_
	//

//	SetLocalString( oModule, "XC_W_ARROW_A_BLACKLIST", "#1" );

  /*--------------------------------------------------------------------------*\
  |                              Variations                                    |
  |----------------------------------------------------------------------------|
  | Variations are related to armor/clothes and other equipments (boots,       |
  | helms, gloves, cloaks..) appearances, and are enslaved to ArmorVisualType  |
  | values (cloth, banded, leather, chain, naked, etc.).                       |
  |                                                                            |
  | These lists are created according to the 3D model filenames, which start   |
  | at index 0. The toolset starts listing these values at index 1. If you     |
  | are using the toolset to modify these values, keep this in mind.           |
  |                                                                            |
  | Since the craft system uses the 2DA values NWN2_Model_Body and             |
  | nwn2_Model_Helm, you can add new lists for new playable races without      |
  | having to modify the system scripts.                                       |
  |                                                                            |
  | Variations can be set unique to each race and sex. If you do not want or   |
  | need to separate based on race or gender, edit the nwnx_craft_system.nss   |
  | file with the following changes:                                           |
  |     XP_CRAFT_USE_RACED_VARIATION = FALSE;                                  |
  |     XP_CRAFT_USE_SEXED_VARIATION = FALSE;                                  |
  | This will default all races and genders to use human male armor parts.     |
  | Because most vault material is designed for females, it is suggested that  |
  | you do not switch sexed variation off.                                     |
  |                                                                            |
  | CL_BOOTS, CL_BODY, and CL_GLOVES variation 99 is an invisible model.       |
  \*--------------------------------------------------------------------------*/

	//
	// For example, disallow variation 1 for elf female body slot.
	//

//	SetLocalString( oModule, "XC_P_EEF_CL_BODY_BLACKLIST", "#1#" );

  /*--------------------------------------------------------------------------*\
  |                               ArmorParts                                   |
  |----------------------------------------------------------------------------|
  | ArmorParts are related to armor components, such as bracers, shoulders,    |
  | elbows, shins, knees, et cetera.                                           |
  |                                                                            |
  | 0 is a valid armor part, and respresents no armor part display.            |
  |                                                                            |
  | Armor parts can be set unique to each race and sex. If you do not want or  |
  | need to separate based on race or gender, edit the nwnx_craft_system.nss   |
  | file with the following changes:                                           |
  |     XP_CRAFT_USE_RACED_ARMOR_PART = FALSE;                                 |
  |     XP_CRAFT_USE_SEXED_ARMOR_PART = FALSE;                                 |
  | This will default all races and genders to use human male armor parts.     |
  |                                                                            |
  | Invalid armor parts will not be displayed.                                 |
  |                                                                            |
  | 3D file names and GFF values are not the same, and are remapped:           |
  |     LSHOULDER->ACLtShoulder                                                |
  |     RSHOULDER->ACRtShoulder                                                |
  |     LBRACER->ACLtBracer                                                    |
  |     RBRACER->ACRtBracer                                                    |
  |     LELBOW->ACLtElbow                                                      |
  |     RELBOW->ACRtElbow                                                      |
  |     LUPARM->ACLtArm                                                        |
  |     RUPARM->ACRtArm                                                        |
  |     LHIP->ACLtHip                                                          |
  |     RHIP->ACRtHip                                                          |
  |     LUPLEG->ACLtLeg                                                        |
  |     RUPLEG->ACRtLeg                                                        |
  |     LLOWLEG->ACLtShin                                                      |
  |     RLOWLEG->ACRtShin                                                      |
  |     LKNEE->ACLtKnee                                                        |
  |     RKNEE->ACRtKnee                                                        |
  \*--------------------------------------------------------------------------*/

	//
	// For example, disallow variations 1-2 for left armor piece for dwarf
	// females.
	//

//	SetLocalString( oModule, "XC_A_DDF_ACLtArm_BLACKLIST", "#1#2#" );

  /*--------------------------------------------------------------------------*\
  |                           Armor Visual Types                               |
  |----------------------------------------------------------------------------|
  | ArmorVisualTypes are related to the material category of 3d models, (i.e.  |
  | scale, cloth, banded, leather, studded leather, chain, plate, ACME, etc.). |
  | It does not alter the item's AC, only its visual armor type.               |
  |                                                                            |
  | Since the craft system uses the 2DA values NWN2_Model_Body and             |
  | nwn2_Model_Helm, you can add new lists for new playable races without      |
  | having to modify the system scripts.                                       |
  |                                                                            |
  | armorvisualdata.2da declares the model prefix for all 3d models.           |
  \*--------------------------------------------------------------------------*/

	//
	// For example, disable visual type 1 for elf female body.
	//

//	SetLocalString( oModule, "XC_AVT_P_EEF_BODY_BLACKLIST", "#1#" );



	//
	// All done.
	//

	return;
}
