////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ALFA Quest System
//     Filename : acr_quest_reward
//    $Revision:: 428        $ current version of the file
//        $Date:: 2007-09-21#$ date the file was created or modified
//       Author : Cipher
//
//  Description
//  This script finalizes quests by awarding gold and removing quest items,
//      focused on the quest structure where the PCs collect a number of a given
//      item and turn them as a mass for reward.
//	This should be used in the Actions Taken branch of a conversation.
//
//  Revision History
//  2007/09/20  Cipher   Inception
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include "acr_quest_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

// sItem = the tag of the item to be taken
// nGold = the amount of gold that the item is worth
// nXP = the amount of XP that the item is worth
void main(string sItem, int nGold, int nXP, float fCR)
{
    object oPC = GetPCSpeaker();
    int nGoldRewarded = 0;
    int nXPRewarded = 0;
    object oItem = GetFirstItemInInventory(oPC);
    while(GetIsObjectValid(oItem))
    {
        if(GetTag(oItem) == sItem)
        {
            nGoldRewarded += nGold;
            nXPRewarded += nXP;
            DestroyObject(oItem);
        }
        oItem = GetNextItemInInventory(oPC);
    }
    GiveGoldToCreature(oPC, nGoldRewarded);
    ACR_AwardStaticQuestXP(oPC, "Collected: "+sItem, nXP, fCR);
}
