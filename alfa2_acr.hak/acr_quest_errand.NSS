////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ALFA Quest System
//     Filename : acr_quest_errand
//    $Revision:: 439        $ current version of the file
//        $Date:: 2007-10-31#$ date the file was created or modified
//       Author : Cipher
//
//  Description
//  This script initiates an item delivery (errand) quest.
//	This should be used in the Actions Taken branch of a conversation.
//
//  Revision History
//  2007/09/20  Cipher  Inception
//  2007/10/15  Cipher  Added tag to variable name to support multi-item errands
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include "acr_quest_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main(string sQuest, string sTemplate)
{
	object oPC = GetPCSpeaker();
	object oItem = CreateItemOnObject(sTemplate, oPC);
	
	// store an object reference on the PC for easy retrieval (avoids costly inventory loops)
	SetLocalObject(oPC, sQuest + GetTag(oItem), oItem);

	// set the quest name
	SetLocalString(oItem, ACR_QST_NAME, sQuest);

	// set the quest state
	ACR_AddPersistentJournalQuestEntry(sQuest, 1, oPC, TRUE, FALSE, FALSE);
}