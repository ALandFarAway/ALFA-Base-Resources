////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ALFA Core Rules
//     Filename : acr_cs_regionchk
//    $Revision:: 153         $ current version of the file
//        $Date:: 2009-07-19 #$ date the file was created or modified
//       Author : AcadiusLost
//
//    Var Prefix: ACR_CSS
//  Dependencies: None
//
//  Description
//  This file implements a generic skill check function to be used in conversations.
//
//  Revision History
//  2008/09/18  AcadiusLost  Inception
//  2009/07/19  AcadiusLost  Fixed mode 0 to check for -1 return
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_i"
#include "acr_language_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

//!! Used for a number of conditional cases involving region.
//!! nMode defaults to 0, to check PC region versus the one passed
//!! nMode = 1 checks if PC is a foreigner (TRUE = foreign)
//!!  Regions:  Amn(3503), TSM(3548), WHL(3559), etc
int StartingConditional(int nRegion, int nMode);

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

int StartingConditional(int nRegion, int nMode)
{
	// nMode=0; check if PC is from nRegion
	// nMode=1; check if PC is foreign
	// nMode=2; check is PC has a starting region yet.
    object oPC = GetPCSpeaker();
	int nReturnValue = -1;
	if (nMode == 0) {
		return (ACR_GetCharacterRegion(oPC) == nRegion);
	} else if (nMode == 1) {
	    return (ACR_GetIsForeign(oPC));
	} else if (nMode == 2) {
	    if (ACR_GetCharacterRegion(oPC) == -1) {
			//SendMessageToPC(oPC, "You have no region defined.");
		    return FALSE;
		} else {
			//SendMessageToPC(oPC, "Your region is "+IntToString(ACR_GetCharacterRegion(oPC)));
		    return TRUE;
		}
	} else {
	    SendMessageToPC(oPC, "Invalid call to acr_cs_regionchk with mode = "+IntToString(nMode));
		return FALSE;
	}
}
