////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ACR GUI Script
//     Filename : gui_dmc_crunselect
//    $Revision:: 307        $ current version of the file
//        $Date:: 2007-04-09#$ date the file was created or modified
//       Author : Cipher
//
//    Var Prefix:
//  Dependencies:
//
//  Description
//  This script is called from the DM Creator in the DM Client. It executes
//  whenever the creature examine window is closed to purge the spawned creature.
//
//  Revision History
//  2007-02-18  Cipher  Inception
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main()
{
	object oDM = OBJECT_SELF;
	
	// limit this function to calls by DMs (DM Creator)
	if (!(GetIsDM(oDM) || GetIsDMPossessed(oDM))) { return; }

	// load the creature under examination
	object oCreature = GetLocalObject(oDM, "ACR_GUI_EXAMINE");

	// ignore this request if the creature has already been destroyed
	if (!GetIsObjectValid(oCreature)) { return; }

	// destroy the creature being examined and the local variable
	DestroyObject(oCreature); DeleteLocalObject(oDM, "ACR_GUI_EXAMINE");
}