////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ACR GUI Script
//     Filename : gui_dmc_forcerest
//        $Date:: 2013-10-11
//       Author : FoamBats4All
//
//   Description:
//  	This script is called from the DM context menu, when a placer is
//		force-rested.
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_resting_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main(string sResRef)
{
	object oDM = OBJECT_SELF;
    object oTarget = GetPlayerCurrentTarget(oDM);
	
	// Hook the ACR rest system.
	DeleteLocalInt( oTarget, ACR_REST_NOT_TIRED );
	SetLocalInt( oTarget, ACR_REST_HP, GetCurrentHitPoints( oTarget ) );
	SetLocalInt( oTarget, ACR_REST_STRENGTH, GetAbilityScore( oTarget, ABILITY_STRENGTH ) );
	SetLocalInt( oTarget, ACR_REST_DEXTERITY, GetAbilityScore( oTarget, ABILITY_DEXTERITY ) );
	SetLocalInt( oTarget, ACR_REST_CONSTITUTION, GetAbilityScore( oTarget, ABILITY_CONSTITUTION ) );
	SetLocalInt( oTarget, ACR_REST_INTELLIGENCE, GetAbilityScore( oTarget, ABILITY_INTELLIGENCE ) );
	SetLocalInt( oTarget, ACR_REST_WISDOM, GetAbilityScore( oTarget, ABILITY_WISDOM ) );
	SetLocalInt( oTarget, ACR_REST_CHARISMA, GetAbilityScore( oTarget, ABILITY_CHARISMA ) );
	_playerRestFinish(oTarget);
}