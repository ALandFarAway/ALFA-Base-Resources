////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ALFA Core Rules
//     Filename : acr_feat_i
//      Version : 0.5
//         Date : 2011-09-08
//       Author : Ronan
//
//  Local Variable Prefix = none
//
//
//  Dependencies external of nwscript: none
//
//  Description
//  This script contains all the even hooks for custom feats. Its seperated from
//	acr_feat_i to prevent some circular includes.
//
//  Revision History
////////////////////////////////////////////////////////////////////////////////

#ifndef ACR_FEAT_EVENTS_I
#define ACR_FEAT_EVENTS_I

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_prc_bladesinger_i"
#include "acr_feat_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

//! Handles ALFA's custom feats which hook into the OnEquipItem event. Should not
//! be called outside module event scripts.
void ACR_FeatOnEquipItem(object oCreature, object oItem);

//! Handles ALFA's custom feats which hook into the OnClientLeave event. Should
//! not be called outside module event scripts.
void ACR_FeatOnClientEnter(object oPC);

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void ACR_FeatOnEquipItem(object oCreature, object oItem) {
	if(GetHasFeat(FEAT_BLADESINGER_BLADESONG_STYLE, oCreature, TRUE)) RefreshBladesong(oCreature);
	if(GetHasFeat(FEAT_BLADESINGER_SPELLSONG, oCreature, TRUE)) RefreshSpellsong(oCreature);
}

void ACR_FeatOnUnequipItem(object oCreature, object oItem) {
	ACR_FeatOnEquipItem(oCreature, oItem);
}

void ACR_FeatOnClientEnter(object oPC) {
	DeleteAllLocalIntsWithString(oPC, ACR_FEAT_HEARTBEAT_FLAG);
}

#endif